---
import Layout from "../layouts/Layout.astro";
import TypewriterEffect from "../components/TypewriterEffect";
import { ChevronUp } from "lucide-react";
---

<Layout title="Drew Beamer">
  <main class="container mx-auto px-4 bg-background">
    <div class="fixed inset-0 h-screen w-screen overflow-hidden">
      <div class="absolute -inset-[100%] opacity-50">
        <div
          class="absolute top-1/4 left-1/3 size-1/4 rounded-full bg-radial from-teal-400 to-blue-600/60 blur-3xl"
        >
        </div>
        <div
          class="absolute top-1/3 right-1/4 size-1/4 rounded-full bg-radial from-pink-400 to-pink-600/60 blur-3xl"
        >
        </div>
        <div
          class="absolute bottom-1/4 left-1/3 size-1/4 rounded-full bg-radial from-violet-400 to-violet-600/60 blur-3xl"
        >
        </div>
        <div
          class="fixed inset-0 bg-neutral-100/10 opacity-20 mix-blend-multiply"
        >
          <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <filter id="noiseFilter">
              <feTurbulence
                type="fractalNoise"
                baseFrequency="0.99"
                numOctaves="6"
                stitchTiles="stitch"></feTurbulence>
            </filter>
            <rect width="100%" height="100%" filter="url(#noiseFilter)"></rect>
          </svg>
        </div>
      </div>
    </div>
    <header
      class="relative z-10 h-screen -top-16 flex items-center justify-start"
    >
      <div
        class="flex items-center justify-between bg-card/60 backdrop-blur-sm shadow-xl rounded-xl p-8"
      >
        <div class="flex flex-col items-start gap-4">
          <h1 class="text-5xl font-mono font-medium">Drew Beamer</h1>
          <p class="text-sm text-card-foreground flex gap-2">
            <TypewriterEffect
              client:load
              words={[
                "Software Engineer",
                "FRC Mentor",
                "Birder",
                "Problem Solver",
              ]}
            />
          </p>
        </div>
      </div>
    </header>

    <div id="rocket-container" class="fixed inset-0 pointer-events-none z-0">
    </div>
    <div
      id="custom-cursor"
      class="fixed pointer-events-none z-50 text-neutral-500 hidden"
    >
      <ChevronUp className="size-12" />
    </div>
  </main>
</Layout>

<script is:inline>
  function createRocket(x, y) {
    const rocket = document.createElement("div");
    rocket.textContent = "ðŸš€";
    rocket.style.position = "absolute";
    rocket.style.left = `${x}px`;
    rocket.style.top = `${y}px`;
    rocket.style.fontSize = "2rem";
    rocket.style.transition = "all 1s cubic-bezier(0.4, 0, 0.2, 1)";

    const container = document.getElementById("rocket-container");
    container?.appendChild(rocket);

    const angle = (Math.random() * 60 - 30) * (Math.PI / 180);

    const windowDiagonal = Math.sqrt(
      window.innerWidth ** 2 + window.innerHeight ** 2
    );
    const endX = x + Math.cos(angle) * windowDiagonal;
    const endY = y - windowDiagonal;

    requestAnimationFrame(() => {
      rocket.style.transform = `translate(${endX - x}px, ${endY - y}px) rotate(${angle}rad)`;
      rocket.style.opacity = "0";
    });

    setTimeout(() => {
      rocket?.remove();
    }, 1000);
  }

  document.querySelector("main")?.addEventListener("click", (e) => {
    createRocket(e.clientX, e.clientY);
  });
</script>
